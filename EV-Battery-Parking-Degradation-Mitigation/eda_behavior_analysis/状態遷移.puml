@startuml
skinparam shadowing false
skinparam state {
  BackgroundColor #FFFFFF
  BorderColor #333333
}
title 学習ステージの状態遷移（データ量に合わせたモデルの進化）

[*] --> S1 : データがほとんど無い／使い始め

state "Step1：はじめの共通モデル" as S1 {
  note right
    ■ 特徴
    - 他のユーザー全体の傾向を使って予測
    - 地域・車種・時間帯などの一般的なパターンを反映
    - 自分のデータが少なくても使える
    ■ 精度
    - おおまかに当たるレベル
  end note
}
S1 --> S2 : 少しデータがたまり始める
S1 --> S1 : 定期的な見直し・更新

state "Step2：少し自分のデータを反映" as S2 {
  note right
    ■ 特徴
    - 共通モデルをベースに
      自分の使い方の平均や傾向を少し反映
    - 「似たユーザー」グループの傾向も参考に
    ■ 精度
    - 共通モデルよりも少し良くなる
  end note
}
S2 --> S3 : データが増えて個人の傾向が見え始める
S2 --> S1 : データが減ったり傾向が変わったとき
S2 --> S2 : 定期的に更新

state "Step3：自分のパターンを学ぶ" as S3 {
  note right
    ■ 特徴
    - 自分の充電や放置の傾向をしっかり取り入れる
    - 全体の傾向と自分の傾向を両方使う
    - 最近の行動を重視
    ■ 精度
    - 個人に合わせた予測ができる
  end note
}
S3 --> S4 : データが十分にたまり、個別モデルが安定
S3 --> S2 : 傾向が変わったり安定しない場合
S3 --> S3 : 定期的に更新

state "Step4：自分専用モデル" as S4 {
  note right
    ■ 特徴
    - 自分だけのデータで学習
    - 行動パターンを最も正確に反映
    - 定期的に再学習して最新の傾向を維持
    ■ 精度
    - 最も高い精度
  end note
}
S4 --> S3 : データが古くなったり変化が大きいとき
S4 --> S4 : 定期的に更新・チェック

@enduml
